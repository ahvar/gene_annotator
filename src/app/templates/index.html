{% extends "base.html" %}

{% block content %}
    <h1>Gene Database</h1>
    <div class="pipeline-controls">
        <form action="{{ url_for('run_pipeline' ) }}" method="post">
            <button type="submit" class="btn btn-primary">Run Pipeline</button>
        </form>
        <p class="text-muted">Click "Run Pipeline" to process and merge datasets</p>
    </div>
    <div class="dataset-tables">
        <h2>Genes Dataset</h2>
        <table class="table">
            <thead>
                <tr>
                    <th>Gene Stable ID</th>
                    <th>Gene Type</th>
                    <th>Gene Name</th>
                    <th>HGNC Name</th>
                    <th>HGNC ID</th>
                </tr>
            </thead>
            <tbody>
            {% for gene in genes.items %}
                <tr>
                    <td>{{ gene.gene_stable_id }}</td>
                    <td>{{ gene.gene_type }}</td>
                    <td>{{ gene.gene_name }}</td>
                    <td>{{ gene.hgnc_name }}</td>
                    <td>{{ gene.hgnc_id }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        {% if genes.has_prev %}<a href="{{ prev_url }}">Previous</a>{% endif %}
        {% if genes.has_next %}<a href="{{ next_url }}">Next</a>{% endif %}

        <h2>Gene Annotations Dataset</h2>
        <table class="table">
            <thead>
                <tr>
                    <th>Gene Stable ID</th>
                    <th>HGNC ID</th>
                    <th>Panther ID</th>
                    <th>Tigrfam ID</th>
                    <th>Wikigene Name</th>
                    <th>Description</th>
                </tr>
            </thead>
            <body>
            {% for annotation in annotations.items %}
                <tr>
                    <td>{{ annotation.gene_stable_id }}</td>
                    <td>{{ annotation.hgnc_id }}</td>
                    <td>{{ annotation.panther_id }}</td>
                    <td>{{ annotation.tigrfam_id }}</td>
                    <td>{{ annotation.wikigene_name }}</td>
                    <td>{{ annotation.gene_description }}</td>
                </tr>
            {% endfor %}    
            </body>
        </table>
        {% if annotations.has_prev %}<a href="{{ annotations_prev_url }}">Previous</a>{% endif %}
        {% if annotations.has_next %}<a href="{{ annotations_next_url }}">Next</a>{% endif %}
    </div>
{% endblock %}